# PROPUESTA DE ARQUITECTURA DE PRODUCTO
## Almanik PMS - RediseÃ±o con LÃ³gica de Negocio Coherente

**Fecha:** 27 de Noviembre, 2025
**VersiÃ³n:** 2.0 Propuesta
**Estado:** Para AprobaciÃ³n

---

## 1. PRINCIPIO FUNDAMENTAL

### La RESERVA es el centro de todo.

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   RESERVA    â”‚
                    â”‚   (booking)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                 â”‚                 â”‚
         â–¼                 â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ HUÃ‰SPED â”‚      â”‚  CAMA   â”‚      â”‚ TRANSACCIONESâ”‚
    â”‚ (guest) â”‚      â”‚  (bed)  â”‚      â”‚ (transactions)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Regla de oro:**
> Todo lo que pasa en el hostal PASA A TRAVÃ‰S de una reserva.
> Sin reserva, no hay huÃ©sped hospedado.
> Sin reserva, no hay cargos ni pagos asociados.

---

## 2. MODELO DE DATOS CORREGIDO

### 2.1 Relaciones Claras

```sql
-- HUÃ‰SPED: Persona registrada (puede no estar hospedada)
guests (
  id, name, email, phone, document, created_at
)

-- CAMA: Recurso fÃ­sico con estado
beds (
  id, name, room, price, status [clean|dirty|occupied|maintenance]
  -- NO tiene guest_id directo
  -- La relaciÃ³n es a travÃ©s de bookings
)

-- RESERVA: El corazÃ³n del sistema
bookings (
  id,
  confirmation_code,  -- ALM-20251127-143022
  guest_id,           -- QuiÃ©n
  bed_id,             -- DÃ³nde
  check_in,           -- Desde cuÃ¡ndo
  check_out,          -- Hasta cuÃ¡ndo
  nights,
  price_per_night,
  total,
  status,             -- pending|confirmed|checked_in|checked_out|cancelled
  source,             -- walk_in|phone|booking_com|email
  checked_in_at,
  checked_out_at,
  created_at
)

-- TRANSACCIÃ“N: Movimiento financiero
transactions (
  id,
  booking_id,         -- Siempre asociada a una reserva
  type,               -- charge|payment
  description,
  amount,
  method,             -- cash|card|transfer
  created_at
)
```

### 2.2 Estados de Reserva

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CICLO DE VIDA DE RESERVA                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚ PENDING  â”‚ â”€â”€â–º â”‚ CONFIRMED â”‚ â”€â”€â–º â”‚ CHECKED_IN â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                          â”‚                  â”‚               â”‚
â”‚                          â”‚                  â–¼               â”‚
â”‚                          â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚                          â”‚           â”‚CHECKED_OUT â”‚         â”‚
â”‚                          â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                    â”‚ CANCELLED â”‚                            â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 Estados de Cama

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ESTADOS DE CAMA                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸŸ¢ CLEAN      â†’ Lista para nuevo huÃ©sped                     â”‚
â”‚  ğŸ”´ OCCUPIED   â†’ HuÃ©sped hospedado (booking status=checked_in)â”‚
â”‚  ğŸŸ¡ DIRTY      â†’ Necesita limpieza post-checkout              â”‚
â”‚  âš« MAINTENANCE â†’ Fuera de servicio                           â”‚
â”‚  ğŸ”µ RESERVED   â†’ Reservada para llegada futura (opcional)     â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. NUEVA ESTRUCTURA DE NAVEGACIÃ“N

### 3.1 MenÃº Principal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SIDEBAR NAVEGACIÃ“N                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ğŸ  TABLERO OPERATIVO                                       â”‚
â”‚     â””â”€â”€ Vista del dÃ­a: llegadas, salidas, camas             â”‚
â”‚                                                              â”‚
â”‚  ğŸ“… RESERVAS                    â† NUEVA SECCIÃ“N PRINCIPAL   â”‚
â”‚     â”œâ”€â”€ Calendario                                          â”‚
â”‚     â”œâ”€â”€ Lista de reservas                                   â”‚
â”‚     â”œâ”€â”€ Nueva reserva                                       â”‚
â”‚     â””â”€â”€ Check-in rÃ¡pido                                     â”‚
â”‚                                                              â”‚
â”‚  ğŸ›ï¸ HOSPEDADOS AHORA           â† ANTES "HUÃ‰SPEDES"         â”‚
â”‚     â”œâ”€â”€ HuÃ©spedes actuales con cama                        â”‚
â”‚     â”œâ”€â”€ Balance por huÃ©sped                                â”‚
â”‚     â””â”€â”€ Check-out                                          â”‚
â”‚                                                              â”‚
â”‚  ğŸ§¹ CAMAS                                                   â”‚
â”‚     â””â”€â”€ Estado de limpieza por habitaciÃ³n                  â”‚
â”‚                                                              â”‚
â”‚  ğŸ“‹ DIRECTORIO                  â† NUEVO (historial)        â”‚
â”‚     â””â”€â”€ Todos los huÃ©spedes registrados                    â”‚
â”‚                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ OPERACIONES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚                                                              â”‚
â”‚  ğŸ›’ VENTAS (POS)                                            â”‚
â”‚  ğŸ’° CAJA                                                    â”‚
â”‚  ğŸ“Š REPORTES                                                â”‚
â”‚                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CONFIGURACIÃ“N â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚
â”‚                                                              â”‚
â”‚  âš™ï¸ CONFIGURACIÃ“N                                           â”‚
â”‚     â”œâ”€â”€ Personal                                            â”‚
â”‚     â”œâ”€â”€ Tours                                               â”‚
â”‚     â”œâ”€â”€ Productos                                           â”‚
â”‚     â””â”€â”€ Usuarios                                            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. FLUJOS DE USUARIO REDISEÃ‘ADOS

### 4.1 Flujo: Nueva Reserva

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PASO 1: SELECCIONAR FECHAS Y CAMA                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ğŸ“… Check-in: [27/11/2025]  ğŸ“… Check-out: [30/11/2025]      â”‚
â”‚  Noches: 3                                                   â”‚
â”‚                                                              â”‚
â”‚  CAMAS DISPONIBLES:                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ [â—‹] 1-1 (Hab 1) - $25.000/noche = $75.000 total   â”‚     â”‚
â”‚  â”‚ [â—‹] 1-2 (Hab 1) - $25.000/noche = $75.000 total   â”‚     â”‚
â”‚  â”‚ [â—‹] 2-3 (Hab 2) - $25.000/noche = $75.000 total   â”‚     â”‚
â”‚  â”‚ [â—‹] Priv1-1 (Privada) - $50.000/noche = $150.000  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                              â”‚
â”‚  [Continuar â†’]                                              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PASO 2: DATOS DEL HUÃ‰SPED                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ğŸ” Buscar huÃ©sped existente: [_______________] [Buscar]    â”‚
â”‚                                                              â”‚
â”‚  -- O CREAR NUEVO --                                        â”‚
â”‚                                                              â”‚
â”‚  Nombre: [________________________]                         â”‚
â”‚  Documento: [________________________]                      â”‚
â”‚  Email: [________________________]                          â”‚
â”‚  TelÃ©fono: [________________________]                       â”‚
â”‚                                                              â”‚
â”‚  [â† AtrÃ¡s] [Continuar â†’]                                    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PASO 3: CONFIRMAR Y PAGO                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  RESUMEN DE RESERVA:                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚
â”‚  CÃ³digo: ALM-20251127-143022                                â”‚
â”‚  HuÃ©sped: Juan Carlos PÃ©rez                                 â”‚
â”‚  Cama: 1-1 (HabitaciÃ³n 1)                                   â”‚
â”‚  Fechas: Nov 27 â†’ Nov 30 (3 noches)                        â”‚
â”‚  Total: $75.000                                             â”‚
â”‚                                                              â”‚
â”‚  PAGO INICIAL:                                              â”‚
â”‚  [â—‹] Sin pago ahora                                         â”‚
â”‚  [â—] Anticipo: [$25.000____] MÃ©todo: [Efectivo â–¼]          â”‚
â”‚  [â—‹] Pago completo: $75.000                                 â”‚
â”‚                                                              â”‚
â”‚  [â† AtrÃ¡s] [âœ“ CREAR RESERVA]                                â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Flujo: Check-in

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CHECK-IN                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ğŸ” Buscar reserva: [ALM-20251127-143022_____] [Buscar]     â”‚
â”‚                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                              â”‚
â”‚  RESERVA ENCONTRADA:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“‹ ALM-20251127-143022                               â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚ ğŸ‘¤ Juan Carlos PÃ©rez                                 â”‚   â”‚
â”‚  â”‚ ğŸ“„ Documento: 1012345678                             â”‚   â”‚
â”‚  â”‚ ğŸ›ï¸ Cama: 1-1 (HabitaciÃ³n 1)                         â”‚   â”‚
â”‚  â”‚ ğŸ“… Nov 27 â†’ Nov 30 (3 noches)                       â”‚   â”‚
â”‚  â”‚ ğŸ’° Total: $75.000 | Pagado: $25.000 | Debe: $50.000 â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ âš ï¸ VERIFICACIONES:                                   â”‚   â”‚
â”‚  â”‚ [âœ“] Cama 1-1 estÃ¡ LIMPIA                            â”‚   â”‚
â”‚  â”‚ [âœ“] Documento verificado                             â”‚   â”‚
â”‚  â”‚ [ ] Cobrar anticipo adicional (opcional)            â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚         [âœ“ CONFIRMAR CHECK-IN]                      â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 Flujo: Vista "Hospedados Ahora"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ›ï¸ HOSPEDADOS AHORA                    [+ Walk-in RÃ¡pido]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Buscar: [_________________] HabitaciÃ³n: [Todas â–¼]         â”‚
â”‚                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                              â”‚
â”‚  HABITACIÃ“N 1 (3 de 9 ocupadas)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ›ï¸ 1-1 â”‚ Juan Carlos PÃ©rez                          â”‚   â”‚
â”‚  â”‚ Noche 2 de 3 â”‚ Sale: Nov 30                          â”‚   â”‚
â”‚  â”‚ ğŸ’° Debe: $50.000                                     â”‚   â”‚
â”‚  â”‚ [+ Cargo] [Pago] [Check-out] [Detalle]              â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ›ï¸ 1-2 â”‚ Carlos Silva                               â”‚   â”‚
â”‚  â”‚ Noche 1 de 2 â”‚ Sale: Nov 29                          â”‚   â”‚
â”‚  â”‚ ğŸ’° Pagado completo âœ“                                 â”‚   â”‚
â”‚  â”‚ [+ Cargo] [Pago] [Check-out] [Detalle]              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  PRIVADA 1 (1 de 2 ocupadas)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ›ï¸ Priv1-1 â”‚ MarÃ­a GonzÃ¡lez                         â”‚   â”‚
â”‚  â”‚ Noche 1 de 2 â”‚ Sale: Nov 28                          â”‚   â”‚
â”‚  â”‚ ğŸ’° Saldo a favor: +$7.000                            â”‚   â”‚
â”‚  â”‚ [+ Cargo] [Pago] [Check-out] [Detalle]              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 Flujo: Check-out

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CHECK-OUT                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ğŸ›ï¸ Cama: 1-1 (HabitaciÃ³n 1)                               â”‚
â”‚  ğŸ‘¤ HuÃ©sped: Juan Carlos PÃ©rez                              â”‚
â”‚  ğŸ“… EstadÃ­a: Nov 27 â†’ Nov 30 (3 noches)                    â”‚
â”‚                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CUENTA FINAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•               â”‚
â”‚                                                              â”‚
â”‚  CARGOS:                                                     â”‚
â”‚  â”œâ”€â”€ Hospedaje (3 noches x $25.000)     $75.000            â”‚
â”‚  â”œâ”€â”€ Cerveza Corona x2                  $8.000              â”‚
â”‚  â””â”€â”€ LavanderÃ­a                         $10.000             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚  TOTAL CARGOS:                          $93.000             â”‚
â”‚                                                              â”‚
â”‚  PAGOS RECIBIDOS:                                           â”‚
â”‚  â”œâ”€â”€ Anticipo (Nov 27)                  $25.000             â”‚
â”‚  â””â”€â”€ Pago parcial (Nov 28)              $30.000             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚  TOTAL PAGADO:                          $55.000             â”‚
â”‚                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚  ğŸ”´ SALDO PENDIENTE:                    $38.000             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                              â”‚
â”‚  COBRAR AHORA:                                               â”‚
â”‚  Monto: [$38.000____] MÃ©todo: [Efectivo â–¼]                 â”‚
â”‚                                                              â”‚
â”‚  [Cancelar] [Cobrar y Check-out] [Check-out sin cobrar]    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. REGLAS DE NEGOCIO

### 5.1 Validaciones AutomÃ¡ticas

```javascript
// REGLA 1: No se puede hacer check-in si cama estÃ¡ sucia
if (bed.status === 'dirty' && action === 'checkin') {
  throw new Error('Cama debe estar limpia para check-in');
}

// REGLA 2: No se puede reservar cama ya ocupada/reservada
if (hasOverlappingBooking(bed_id, check_in, check_out)) {
  throw new Error('Cama no disponible para esas fechas');
}

// REGLA 3: Check-out cambia estado de cama a sucia
onCheckout(booking) {
  updateBedStatus(booking.bed_id, 'dirty');
  updateBookingStatus(booking.id, 'checked_out');
}

// REGLA 4: Check-in cambia estado de cama a ocupada
onCheckin(booking) {
  updateBedStatus(booking.bed_id, 'occupied');
  updateBookingStatus(booking.id, 'checked_in');
}
```

### 5.2 GeneraciÃ³n de CÃ³digo de ConfirmaciÃ³n

```javascript
function generateConfirmationCode() {
  const date = new Date();
  const dateStr = date.toISOString().slice(0,10).replace(/-/g,'');
  const timeStr = date.toTimeString().slice(0,8).replace(/:/g,'');
  return `ALM-${dateStr}-${timeStr}`;
}
// Ejemplo: ALM-20251127-143022
```

---

## 6. DASHBOARD OPERATIVO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ  TABLERO OPERATIVO - 27 Nov 2025                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  CHECK-OUTS HOY â”‚ â”‚ LLEGADAS HOY    â”‚ â”‚ CAMAS LIBRES    â”‚â”‚
â”‚  â”‚      ğŸ”´ 3       â”‚ â”‚      ğŸŸ¢ 2       â”‚ â”‚      âšª 15      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                              â”‚
â”‚  ğŸ”´ CHECK-OUTS PENDIENTES HOY:                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 10:00 â”‚ 1-3 â”‚ Carlos Silva â”‚ Debe: $0 â”‚ [Check-out] â”‚   â”‚
â”‚  â”‚ 11:00 â”‚ 2-1 â”‚ Ana Ruiz â”‚ Debe: $15.000 â”‚ [Check-out]â”‚   â”‚
â”‚  â”‚ 14:00 â”‚ Priv2 â”‚ Pedro LÃ³pez â”‚ Debe: $0 â”‚ [Check-out]â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  ğŸŸ¢ LLEGADAS ESPERADAS HOY:                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ALM-123 â”‚ MarÃ­a GarcÃ­a â”‚ Cama 1-5 â”‚ 3 noches        â”‚   â”‚
â”‚  â”‚         â”‚ Anticipo: $25.000 â”‚ [Check-in]            â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ALM-124 â”‚ Jorge Ruiz â”‚ Cama 2-2 â”‚ 1 noche           â”‚   â”‚
â”‚  â”‚         â”‚ Sin anticipo â”‚ [Check-in]                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. PRIORIZACIÃ“N DE IMPLEMENTACIÃ“N

### Fase 1: CRÃTICO (Semana 1)
1. Crear vista "Hospedados Ahora" con balance
2. Implementar Check-out con cobro
3. Conectar booking â†” bed â†” guest visualmente

### Fase 2: IMPORTANTE (Semana 2)
4. Crear secciÃ³n Reservas con lista
5. Implementar Nueva Reserva (3 pasos)
6. Implementar Check-in desde reserva

### Fase 3: MEJORA (Semana 3)
7. Calendario de disponibilidad
8. Dashboard operativo mejorado
9. Alertas y notificaciones

### Fase 4: POLISH (Semana 4)
10. Renombrar navegaciÃ³n
11. Directorio de huÃ©spedes
12. Reportes mejorados

---

## 8. MÃ‰TRICAS DE Ã‰XITO

| MÃ©trica | Antes | DespuÃ©s |
|---------|-------|---------|
| Tiempo para ver quiÃ©n estÃ¡ hospedado | ??? minutos | < 5 segundos |
| Clicks para check-in | ??? (imposible) | 3 clicks |
| Clicks para check-out | ??? (imposible) | 2 clicks |
| Ver balance de huÃ©sped | Buscar en transactions | 1 click |
| Crear reserva | No existe | 3 pasos claros |

---

*Documento de Arquitectura de Producto v2.0*
*Almanik PMS - Propuesta de RediseÃ±o*
*27 de Noviembre, 2025*
